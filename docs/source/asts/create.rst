Creating Artifical Star Lists
============

A useful capability of DOLPHOT is to perform artifical star tests (ASTs) to evaluate photometric errors, systematic uncertainties and completenss across the CMD. To do so, DOLPHOT injects mock stellar sources in the images, with realistic noise properties, and performs photometry on them using the same set up used for reduction. The first step to perform ASTs is to create a suitable list of input mock stars, that will be injected in the dataset. The input list will consist of multiple entries, one per star, having the following format:

.. code-block:: bash

  1 1 X Y M1 M2 M3...
  1 1 X Y M1 M2 M3...
  1 1 X Y M1 M2 M3...
  ...

Where the first two numbers are the extension number and chip number in the image (both 1, for a typical JWST reduction); X and Y are the pixel coordinate of the mock star, in the coordinate system of the reference image; and the following numbers are the input magnitudes in each of the photometered filters.

.. note::

  The extension number will need to be set to 0, if the frames have been processed through *splitgroups*. This is the case, for instance, is the images are reduced together with HST frames.

The input star list can be created by hand or generated using the routine *fakelist*, which uses the following syntax:

.. code-block:: bash

  > fakelist <photname> <filter1> <filter2> <f1min> <f1min> <cmin> <cmax> <options> > <listname>

Where **photname** is the name of the dolphot output; **filter1** and **filter2** are the name of the two filters; and **f1min**, **f1max**, **cmin** and **cmax** set the range in magnitude and color of the input mock stars. Commonly used options of *fakelist* include:

* **nstar**: set the number of input stars to be generated. Default is 1.
* **usexy**: provide the name of a file containing a list of positions (in the format '1 1 X Y'). The generated star list will follow the same spatial probability distribution. Default is uniform spatial distribution.
* **usecmd**: provide a name of a file containing a list of magnitudes (in the format '1 1 X Y Magnitude Color'). The generated star list fill follow the same probability distribution on the CMD. Default is uniform distribution on the CMD.

.. note::

  *fakelist* can only generate a list of input stars with two filters. If interested in running ASTs on more bands, the input list should be generated by hand.

In our M92 example, we generated the input star list using the following example:

.. code-block:: bash

  > fakelist M92_example.phot NIRCAM_F090W NIRCAM_F150W 17 31 -05 2 -nstar=500000 > fake.list


